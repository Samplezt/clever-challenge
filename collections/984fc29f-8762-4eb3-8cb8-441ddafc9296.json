{"info":{"_postman_id":"984fc29f-8762-4eb3-8cb8-441ddafc9296","name":"Flujo_de_posteos","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},"item":[{"name":"GET list all posts","event":[{"listen":"test","script":{"id":"c9dd2de5-d799-4003-b3d8-73703a6a249b","exec":["const titleIsDefined = (post) => {","    return post.title !== undefined;","}","","pm.test(\"Check status code 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Ok message\", function () {","    pm.response.to.have.status(\"OK\");","});","","pm.test(\"Check json response\", function(){","    pm.response.to.have.jsonBody();","})","","pm.test(\"All posts should have title defined\", function() {","    const posts = pm.response.json();","    pm.expect(posts.every(titleIsDefined)).to.be.true;","})"],"type":"text/javascript"}}],"id":"5276baf5-11a8-4666-9ada-f2d2d6b503da","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"Content-Type","value":"application/json","type":"text"}],"url":{"raw":"{{host}}/posts","host":["{{host}}"],"path":["posts"]}},"response":[]},{"name":"GET posts user 1","event":[{"listen":"test","script":{"id":"881e9f2f-cad0-420b-83f5-8ab55116c1f5","exec":["const userIdValidate = (userPosts) => {","    return userPosts.userId === 1;","}","","pm.test(\"Check status code 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Ok message\", function () {","    pm.response.to.have.status(\"OK\");","});","","pm.test(\"Check json response\", function(){","    pm.response.to.have.jsonBody();","})","","pm.test(\"All user one posts should have the same user id\", function() {","    const userPosts = pm.response.json();","    pm.expect(userPosts.every(userIdValidate)).to.be.true;","})"],"type":"text/javascript"}}],"id":"3828e578-99cb-44ed-96be-f8aa26cedd2e","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"Content-Type","value":"application/json","type":"text"}],"url":{"raw":"{{host}}/users/1/posts","host":["{{host}}"],"path":["users","1","posts"]}},"response":[]},{"name":"POST create new post","event":[{"listen":"test","script":{"id":"1b1b5353-cf8d-4c68-a989-dd9c4e81692e","exec":["const schema = {","    \"type\": \"object\",","    \"properties\": {","        \"title\": {","            \"type\": \"string\"","        },","        \"body\": {","            \"type\": \"string\"","        },","        \"userId\": {","            \"type\": \"number\"","        },","        \"id\": {","            \"type\": \"number\"","        }","    },","    \"required\": [","        \"id\",","        \"userId\",","        \"title\"","    ]","};","","const newPost = pm.response.json().id;","pm.collectionVariables.set(\"idNewPost\", newPost);","","","pm.test(\"Check status code 201\", function () {","    pm.response.to.have.status(201);","});","","pm.test(\"Created message\", function () {","    pm.response.to.have.status(\"Created\");","});","","pm.test(\"Check json response\", function(){","    pm.response.to.have.jsonBody();","})","","","pm.test(\"Check status code 201\", function () {","    pm.response.to.have.status(201);","});","","pm.test(\"Created message\", function () {","    pm.response.to.have.status(\"Created\");","});","","pm.test(\"New post id is a number\", function () {","    pm.expect(newPost).to.be.a('number');","});","","pm.test(\"JSON Schema validation\", function(){","    pm.response.to.have.jsonBody();","    pm.response.to.have.jsonSchema(schema)","})"],"type":"text/javascript"}}],"id":"5b34e309-3511-4c3d-927f-e9d55550ef56","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Content-Type","value":"application/json","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"title\": \"este es un nuevo post para clever it\",\n    \"body\": \"test\",\n    \"userId\": 1\n}"},"url":{"raw":"{{host}}/posts","host":["{{host}}"],"path":["posts"]}},"response":[]},{"name":"GET list new post created","event":[{"listen":"test","script":{"id":"f1b6a29b-2f2a-4a78-9e00-10fc71b89061","exec":["const newPostData = pm.response.json().id;","pm.test(\"Check status code 200\", function () {","    pm.response.to.have.status(200);","});","","pm.test(\"Ok message\", function () {","    pm.response.to.have.status(\"OK\");","});","","pm.test(\"New post has the correct id\", function () {","    pm.expect(newPostData).to.be.eql(pm.collectionVariables.get(\"idNewPost\"))","});",""],"type":"text/javascript"}}],"id":"2a317bd0-de9f-4cdd-a467-c94191795b2c","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"Content-Type","value":"application/json","type":"text"}],"url":{"raw":"{{host}}/posts/{{idNewPost}}","host":["{{host}}"],"path":["posts","{{idNewPost}}"]}},"response":[]}],"variable":[{"id":"35fede59-0664-4e1f-9ebb-cf3284a6f363","key":"idNewPost","value":""}]}